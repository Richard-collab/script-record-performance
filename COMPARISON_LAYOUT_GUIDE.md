# 🎨 左右对比卡片布局 - 更新说明

## 📊 全新的对比视图

已将原来的表格布局改为左右对比的卡片布局，更直观地展示A/B测试结果。

## ✨ 新布局特点

### 左侧卡片 - 基准话术（话术 A）
- 显示基准组的完整数据
- 绿色标题栏
- 只显示数值，无差值标注

### 右侧卡片 - 对比话术（话术 B）
- 显示实验组的完整数据
- 绿色标题栏
- **显示差值和方向**：【+0.91%】↑

## 📋 数据组织

每个卡片包含：

### 1. 核心指标（横向布局）
```
外呼量          214,183       【-145,484】↓
接通量          7,494         【-5,101】↓
开场白挂机率    72.52%        【+1.34%】↓
平均通话时长    18.29s        【-0.08s】↓
A类平均通话时长 229.52s       【+16.79s】↑
沉默挂机率      6.16%         【+1.44%】↓
```

### 2. 重点语料命中率详情（列表格式）
```
重点语料命中率详情
  问候语:99.99% 【-0.03%】
  开场白:81.05% 【+4.58%】
  引导打开微信搜索框1:5.43% 【-1.34%】
  ...
```

### 3. 重点语料挂机率详情（列表格式）
```
重点语料挂机率详情
  问候语:4.52% 【+0.03%】
  开场白:75.82% 【+3.98%】
  ...
```

### 4. 知识库命中率详情（列表格式）
```
知识库命中率详情
  问答-拒绝:0.95% 【+0.12%】
  问答-询问额度:0.48% 【-0.05%】
  ...
```

### 5. 意图命中率详情（列表格式）
```
意图命中率详情
  A:0.91% 【+0.15%】
  B:1.53% 【-0.23%】
  ...
```

## 🎯 差值显示规则

### 颜色编码：
- 🟢 **绿色 (+20%)**：性能提升
  - 外呼量增加
  - 接通量增加
  - 通话时长增加
  - 命中率提升
  - **挂机率降低**（特殊处理）
  
- 🔴 **红色 (-15%)**：性能下降
  - 外呼量减少
  - 接通量减少
  - 通话时长减少
  - 命中率降低
  - **挂机率升高**（特殊处理）

### 箭头方向：
- ↑ 向上箭头：有利变化
- ↓ 向下箭头：不利变化

## 🔧 技术实现

### 组件结构：
```
MetricTable
├── MetricCard (左侧基准)
│   ├── 标题栏
│   ├── MetricRow × 6 (核心指标)
│   └── DetailList × 4 (详情数据)
└── MetricCard (右侧对比)
    ├── 标题栏
    ├── MetricRow × 6 (核心指标 + 差值)
    └── DetailList × 4 (详情数据 + 差值)
```

### 动态标题：
标题自动从API获取，格式：
```
{脚本名称} - {任务名称}
```

例如：
```
1组众安贷公众号-众安贷钱包AI拉新-C1.0yd - 20260209众安_公众号_1
```

## 🎨 样式特点

- **卡片间距**：24px (gap: 3)
- **标题背景色**：#00897b（青绿色）
- **边框**：1px solid #e0e0e0
- **内边距**：24px
- **行间距**：核心指标行间距 12px，详情列表行间距 4px
- **差值标识**：【】括号包裹，字体加粗

## ✅ 使用方法

1. 启动开发服务器：
   ```bash
   bun run dev
   ```

2. 在筛选面板选择：
   - 分析日期
   - 基准话术 (A)
   - 实验话术 (B)
   
3. 点击"开始分析"

4. 查看左右对比卡片：
   - 左侧：基准组完整数据
   - 右侧：实验组数据 + 差值分析

## 📈 数据完整性

所有6个核心指标 + 4类详情数据全部展示：
- ✅ 外呼量、接通量
- ✅ 开场白挂机率、平均通话时长
- ✅ A类平均通话时长、沉默挂机率
- ✅ 重点语料命中率（5+ 项）
- ✅ 重点语料挂机率（5+ 项）
- ✅ 知识库命中率（若有数据）
- ✅ 意图命中率（若有数据）

---

**更新时间**: 2026-02-09  
**布局状态**: ✅ 左右对比卡片完成
